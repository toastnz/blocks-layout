(()=>{var o={d:(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},e={};o.d(e,{A:()=>t});let s={childList:!0,subtree:!0},n=e=>console.log("DomObserver:",e);class t{constructor(){this.agents=[],this.observers=new Map}findOrCreateObserver(t){var e=this.observers.get(t);return e||((e=new MutationObserver(()=>{this.agents.filter(e=>e.settings===t).forEach(e=>e.update())})).observe(document.body,t),this.observers.set(t,e),e)}observe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s;if(!e)return console.error(e+" DomObserver not created: No selector provided");if(!t||"function"!=typeof t)return console.error(e+" DomObserver not created: No callback provided");r=Object.assign(r,s),this.findOrCreateObserver(r);e=new i(e,t,r);this.agents.push(e)}}class i{constructor(e,t,r){this.cache=new Set,this.timeouts={},this.selector=e,this.callback=t,this.settings=r,this.update()}update(){clearTimeout(this.timeouts.update),this.timeouts.update=setTimeout(()=>{var e=[...document.querySelectorAll(this.selector)].filter(e=>!this.cache.has(e));e.length&&(e.forEach(e=>this.cache.add(e)),this.callback(e))},100)}}var e=new e.A,r=null;function a(r){var e=document.createElement("button"),o=!1;e.classList.add("preview-thumb"),r.appendChild(e),e.addEventListener("mousedown",function(){o=!0,r.classList.add("dragging")}),window.addEventListener("mouseup",function(){o=!1,r.classList.remove("dragging")}),window.addEventListener("mousemove",function(e){var t;o&&(t=r.parentElement.parentElement,e=e.clientX-10-t.getBoundingClientRect().left,t=t.clientWidth,e=100-Math.min(Math.max(e/t*100,25),75).toFixed(2),document.body.style.setProperty("--block-preview-width","".concat(e,"%")))})}e.observe("#BlockPreviewFrame",function(e){var t;console.log("Found preview: BlockPreviewFrame",e[0]),r=e[0],e=document.querySelector(".cms-content .panel"),t=document.createElement("fieldset"),r&&e&&(e.appendChild(t),t.appendChild(r)),a(r)}),e.observe(".cms-preview-iframe",function(e){console.log("Found preview: cms-preview-iframe",e[0]),a(r=e[0])}),console.log("Preview script loaded")})();
//# sourceMappingURL=preview.js.map