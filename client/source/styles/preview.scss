#BlockPreviewFrame {
  display: none;
}

@media (min-width: 1400px) {
  .cms-content:has(#BlockPreviewFrame) {
    display: flex;
    flex-direction: column;
    height: 100vh;

    .cms-content-header,
    .cms-content-footer {
      flex: 0 0 auto;
    }

    .panel {
      display: flex;
      position: relative;
      flex-direction: row;
      overflow: hidden;
      padding: 0;

      >.alert {
        display: none !important;
      }

      >fieldset {
        flex: 1 1 50%;
        max-width: 50%;
        position: relative;
        overflow: auto;
        padding: 20px;

        &:has(#BlockPreviewFrame) {
          box-shadow: 0 0 0 1px var(--cms-border-colour, transparent);
        }

        .form-group {
          display: block !important;
          width: 100% !important;
          margin-left: 0 !important;
          margin-right: 0 !important;
          // padding-right: 40px!important;

          &:after {
            margin-left: 0 !important;
            margin-right: 0 !important;
            width: 100% !important;
          }
        }

        .hidden {
          display: none !important;
        }

        .form__field-label {
          padding-left: 0;
          flex-basis: 100% !important;
          max-width: 100% !important;
        }

        .form__field-holder {
          flex-basis: 100% !important;
          width: 100% !important;
          max-width: 100% !important;
          margin-left: 0 !important;
          padding-left: 0 !important;
          padding-right: 0 !important;

          &.form-check {
            margin-left: 20px !important;
            max-width: calc(100% - 20px) !important;
          }

          .form__field-holder {
            padding-left: 0 !important;
            padding-right: 0 !important;
          }
        }

        > #BlockPreviewFrame {
          display: block;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: var(--cms-background-colour--dynamic, transparent);

          &.dragging {
            &:before {
              content: '';
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: 1;
            }
          }

          .preview-thumb {
            position: absolute;
            top: 50%;
            left: 0;
            width: 20px;
            height: auto;
            padding: 0;
            margin: 0;
            transform: translateY(-50%);
            border: 0;
            background-color: transparent;

            &:before,
            &:after {
              content: 'S';
              display: block;
              text-align: center;
              width: 100%;
              font-size: 18px;
              font-family: "silverstripe" !important;
              font-style: normal !important;
              font-weight: normal !important;
              font-variant: normal !important;
              text-transform: none !important;
              line-height: 1;
              margin-bottom: .1em;
              color: var(--cms-text-colour, #ccc);
            }
          }

          iframe {
            position: absolute;
            top: 0;
            left: 20px;
            width: calc(100% - 20px);
            height: 100%;
            border: 0;
            overscroll-behavior: contain;
            // border-radius: 3px;
            transform-origin: 0 0;
          }
        }
      }
    }
  }

  // Allow for custom block preview width
  body:has(#BlockPreviewFrame) {
    --block-preview-width: 50%;

    .panel {
      >fieldset {
        max-width: 75% !important;
        min-width: 25% !important;
        flex-basis: calc(100% - var(--block-preview-width, 50%)) !important;
        width: calc(100% - var(--block-preview-width, 50%)) !important;

        &:has(#BlockPreviewFrame) {
          flex-basis: var(--block-preview-width, 50%) !important;
          width: var(--block-preview-width, 50%) !important;
        }
      }
    }
  }
}



// #BlockPreviewFrame {
//   display: none;
// }

// @media (min-width: 1400px) {
//   .cms-content:has(#BlockPreviewFrame) {
//     .panel {
//       position: relative;
//       display: flex;
//       flex-direction: row;

//       .alert {
//         display: none!important;
//       }

//       > fieldset {
//         flex: 1 1 50%;
//         max-width: 50%;
//         position: relative;

//         .form-group {
//           display: block!important;
//           width: 100%!important;
//           margin-left: 0!important;
//           margin-right: 0!important;
//           // padding-right: 40px!important;

//           &:after {
//             margin-left: 0!important;
//             margin-right: 0!important;
//             width: 100%!important;
//           }
//         }

//         .form__field-label {
//           padding-left: 0;
//           flex-basis: 100%!important;
//           max-width: 100%!important;
//         }

//         .form__field-holder {
//           flex-basis: 100%!important;
//           width: 100%!important;
//           max-width: 100%!important;
//           margin-left: 0 !important;
//           padding-left: 0!important;
//           padding-right: 0!important;

//           &.form-check {
//             margin-left: 20px!important;
//             max-width: calc(100% - 20px)!important;
//           }

//           .form__field-holder {
//             padding-left: 0!important;
//             padding-right: 0!important;
//           }
//         }

//         &:has(#BlockPreviewFrame) {
//           position: sticky;
//           top: 0;
//           right: 0;

//           > #BlockPreviewFrame {
//             display: block;
//             position: absolute;
//             top: -20px;
//             left: 20px;
//             width: 100%;
//             height: calc(100% + 40px);
//             box-shadow: 0 0 0 1px var(--cms-border-colour, transparent);

//             iframe {
//               position: absolute;
//               top: 0;
//               left: 0;
//               width: 1440px;
//               height: 100%;
//               border: 0;
//               overscroll-behavior: contain;
//               // border-radius: 3px;
//               transform-origin: 0 0;
//             }
//           }
//         }
//       }
//     }
//   }
// }
